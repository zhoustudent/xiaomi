!function(t){function e(i){if(a[i])return a[i].exports;var o=a[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){t.exports=a(1)},function(t,e,a){a(2),a(5),a(6),jQuery(function(t){var e=t("#MJJS_items"),a=t(".section-itmes",e),i=1;a.visibleWatcher({visibleClass:"mj-active",offset:400,onVisible:function(t,e){a.filter(function(t){return e+i>=t}).addClass("preload")}}),t("#Js-tabs").mjTabs({autoPlay:3500});var o=t("#J_modalVideo");t(".J_videoBtn").click(function(){o.find(".modal-hd .title").text(t(this).attr("data-video-title")).end().find(".modal-bd").html('<iframe width="880" height="536" src="//hd.mi.com/f/zt/hd/misc/youku.html?vid='+t(this).attr("data-video")+'" frameborder="0" allowfullscreen></iframe>'),o.modal({show:!0,backdrop:"static"}),o.on("hide",function(){o.find(".modal-hd .title").empty(),o.find(".modal-bd").empty()})}),t(".mj-roomrobot-csystem-07").find(".mj-robot-item").mouseover(function(){t(this).find("video")[0].play()}).mouseout(function(){t(this).find("video")[0].pause()});var n=document.getElementById("roomrobot-canvas");if(n){var r=n.getContext("2d"),s=1200,c=600;n.width=s,n.height=c;for(var d=10,l=150,u=[],f=0;l>f;f++)u.push([Math.random()*s,Math.random()*c,2*Math.random(),Math.random()/2]);var p=function(){r.clearRect(0,0,s,c);for(var t=0;l>t;t++)r.fillStyle="rgba(0,0,0,"+u[t][3]+")",r.beginPath(),r.arc(u[t][0],u[t][1],u[t][2],0,2*Math.PI,!0),r.closePath(),r.fill()},h=function(t){for(var e=0;l>e;e++)u[e][1]<0?(u[e][0]=Math.random()*s,u[e][1]=c,u[e][2]=2*Math.random(),u[e][3]=Math.random()/2):(u[e][0]<(s-500)/2&&(u[e][0]+=t),u[e][0]>500+(s-500)/2&&(u[e][0]-=t),u[e][1]-=t)},m=function(){new p,h(d)};setInterval(m,30)}MI.getProductPrice({priceWrapper:".J_priceWrapper",originalPrice:".J_originalPrice",currentPrice:".J_currentPrice"})})},function(t,e,a){a(3),a(4),MI.productStock.checkStockType({orderStockUrl:"/api/hdstock.php?id=stockid&tag=roomrobot",objGoodsName:"米家扫地机器人"})},function(t,e){!function(t){function e(e){function a(){for(var e=-1,a=t(document).scrollTop(),i=0,o=d.length;o>i&&a+r.viewport.height()>d[i];i+=1)e+=1;return e}function i(){var e=a();c!==e&&(c=e,s.filter(function(e){return c>=e&&!t(this).hasClass(r.visibleClass)}).addClass(r.visibleClass).trigger("visible.visibleWatcher"),r.onVisible(s.eq(c),c))}function o(){s.each(function(){var e=t(this).attr("data-offset")?Number(t(this).attr("data-offset")):r.offset,a=e%1===0?e:e*r.viewport.height();d.push(t(this).offset().top+a)}),i(),r.onLoad()}var n,r,s=t(this),c=-1,d=[];n={viewport:t(window),visibleClass:"is-visible",offset:300,onLoad:t.noop,onVisible:t.noop},r=t.extend({},n,e),o(),r.viewport.on({"scroll.visibleWatcher":i,"resize.visibleWatcher":o})}t.fn.visibleWatcher=function(t){return e.call(this,t),this}}(jQuery)},function(t,e){MI.namespace("productStock"),MI.productStock=function(){function t(t){t=$.extend({objcheckStockbtn:".J_productStockStatus",objListtempBox:$("#J_productConListContent"),objListTemp:$("#J_productColorTemplate"),objListlargePic:$(".J_curProductBg"),objListnamePrice:$(".J_curProductPrice"),objListnextBtn:".J_curNextbtn",orderStockUrl:"/misc/getstarstock/hdid/",objListcolorTotal:$("#J_curProductTotal"),objModal:$("#J_productVersion"),objGoodsName:"小米商品"},t||{});var e=function(){function e(t,e){$.ajax({type:"GET",url:MI.GLOBAL_CONFIG.damiaoSite+"hdinfo/cn",dataType:"jsonp",jsonp:"jsonpcallback",jsonpCallback:"hdinfo",timeour:1e4,error:function(){g(e)},success:function(a){a||g(e);var i=!1;$.each(a.status,function(a,o){return a?$.inArray(a,t)>=0?(i=!0,o.hdstart===!0&&o.hdstop===!1?(p=!1,n()):g(e),!1):void 0:!0}),i||g(e)}})}function a(){var t=$(".J_openRegister"),e=$("#J_modalOpenSaleRegister"),a=MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href;t.on("click",function(i){i.preventDefault(),$.ajax({type:"GET",url:MI.GLOBAL_CONFIG.orderSite+"/misc/onsaleRegister?_r=",dataType:"jsonp",jsonp:"jsonpcallback",data:{goods_id:v},success:function(i){1===i.code?(t.replaceWith('<a class="btn btn-small btn-primary" data-disabled="false">已设置开售提醒</a>'),e.modal({backdrop:!0,keyboard:!0,show:!0})):-2===i.code&&(window.location.href=a)}})})}function i(t){$.ajax({type:"GET",url:MI.GLOBAL_CONFIG.orderSite+"/misc/onsaleCheck?_r=",dataType:"jsonp",jsonp:"jsonpcallback",data:{goods_list:v},success:function(e){var i="";1===e.code&&""!==e.data[v]?(i="已设置开售提醒",$(t).removeClass("J_openRegister")):(i="设置开售提醒",$(t).addClass("J_openRegister"),a()),$(t).removeClass("btn-disabled").removeClass("J_productStockStatus btn-gray").addClass("btn-primary").text(i).attr("data-disabled","false")}})}function o(e){$(e).attr("data-gid",f),$(t.objListnextBtn).on("click",function(){return $(e).hasClass("btn-disabled")?!1:void t.objModal.modal("hide")}),MI.bigtapAddCart({obj:e,overCallback:function(){g(e)},callback:function(t,e){t||location.reload(),1===t.code?location.href=MI.GLOBAL_CONFIG.staticSite+"/buySuccess/?gid="+e.attr("data-gid"):alert(t.msg)}})}function n(){p===!1?(j(t.objcheckStockbtn),u>1?s():o(t.objcheckStockbtn)):g(t.objcheckStockbtn)}function r(){var e=c+d,a=l?"<b>(包邮)</b>":"";t.objListcolorTotal.html("小计："+e+"元"+a)}function s(){var e=t.objListtempBox.find("li"),a=t.objListlargePic;e.on("click",function(){var e=$(this).attr("data-bg")+"?width=220&height=220",i=$(this).attr("data-gid"),n=$(this).attr("data-name");$(this).hasClass("saled")?$(t.objListnextBtn).addClass("btn-disabled").text("暂时缺货").attr("data-gid",""):$(t.objListnextBtn).removeClass("btn-disabled").text("立即购买"),c=parseInt($(this).attr("data-price")),$(this).addClass("current").siblings("li").removeClass("current"),a.css({background:"url("+e+") no-repeat center"}),t.objListnamePrice.text(n+" "+c+"元"),f=i,r(),o(t.objListnextBtn)}),$(t.objcheckStockbtn).on("click",function(){if(p)return!1;e.eq(0).click();var a=t.objModal.attr("data-width");t.objModal.css({width:a}).modal({backdrop:!0,keyboard:!0,show:!0})})}var c=0,d=0,l=!1,u=0,f="",p="",h=[],m=!1,b=!1,v="";$.ajax({url:MI.GLOBAL_CONFIG.orderSite+t.orderStockUrl,dataType:"jsonp",jsonp:"jsonpcallback",success:function(a){var i=[],o=doT.template(t.objListTemp.html());if("[object Array]"===Object.prototype.toString.call(a))i=a;else for(var r in a)a.hasOwnProperty(r)&&i.push(a[r]);t.objListtempBox.html(o(i)),$(".J_goodsTitle").text("购买"+t.objGoodsName),$.each(a,function(t,e){e.is_sale===!0&&(u++,$.inArray(e.id,MI.GLOBAL_CONFIG.damiaoGoodsId)>=0?(h.push(e.id),f=h.join("-"),m=!0):(e.is_cos===!1&&(p=!1,f=e.id),e.open_register===!0&&(b=!0,v=e.id)))}),m?e(h,t.objcheckStockbtn):n()}});var j=function(t){var e=$(t).attr("data-buy-text")||"立即购买";$(t).removeClass("btn-disabled").removeClass("btn-gray").addClass("btn-primary").text(e).attr("data-disabled","false")},g=function(t){var e="";b===!0?i(t):(e=$(t).attr("data-disable-text")||"暂时缺货",$(t).removeClass("btn-primary").addClass("btn-gray").addClass("btn-disabled").text(e).attr("data-disabled","true"))}};e()}return{checkStockType:t}}()},function(t,e){!function(t){"use strict";t.fn.mjTabs=function(e){function a(t){return clearInterval(s),s=setInterval(function(){r=r===t?0:r+1,i(r)},o.autoPlay),!1}function i(t){if(n.find(o.mjItems).is(":animated"))return!1;switch(o.effect){case"fade":n.find(o.mjItems).css("z-index",0).removeClass("mj-tabs-active").eq(t).show().addClass("mj-tabs-active").css("z-index",10).animate({opacity:1},o.mjSpeed,function(){n.find(o.mjItems).eq(t).siblings().hide().css({opacity:0})});break;case"slide":n.find("ul").animate({left:-l*t})}n.find(".pager").removeClass("cur").eq(t).addClass("cur")}var o=t.extend({mjItems:".mj-tabs-items",mjPosition:".mj-tabs-position",mjUpdown:".mj-tabs-updown",navTips:[],effect:"fade",view:!1,autoPlay:0,style:{}},e),n=this,r=0,s=null,c=n.find(o.mjItems).length,d=c-1;n.each(function(){var e=t(this);e.css(o.style),t(this).find(o.mjItems).each(function(t){var a=o.navTips[t];e.find(o.mjPosition).append('<a href="javascript:;" class="pager pager-'+t+'"><span>'+a+"</span></a>"),e.find(".pager").eq(0).addClass("cur")})});var l=t(n).width(),u=t(n).height();switch(o.autoPlay&&(a(d),n.mouseleave(function(){a(d)})),n.find(".pager").click(function(){return t(this).hasClass("cur")?!1:(clearInterval(s),r=t(this).index(),void i(r))}),n.find(o.mjUpdown).click(function(){if(n.find(o.mjItems).is(":animated"))return!1;clearInterval(s);var e=t(this).attr("data-attr"),a=o.view?d-o.view:d;switch(e){case"next":r=r===a?0:r+1;break;case"prev":r=0===r?a:r-1}i(r)}),o.effect){case"fade":n.find(o.mjItems).hide().css({position:"absolute",opacity:0}).eq(0).show().css({opacity:1,zIndex:10});break;case"slide":n.find("ul").css({width:l*c}),l=o.view?l/o.view:l,n.find(o.mjItems).show().css({position:"relative",width:l,height:u})}}}(jQuery)},function(t,e){MI.getProductPrice=function(t){var e={priceWrapper:".J_productPriceWrapper",originalPrice:".J_oPrive",currentPrice:".J_cPrice"},a=$.extend(e,t),i=$(a.priceWrapper),o="http://cn.orderapi.mi.com/stock/goods",n=[];i.each(function(){n.push($(this).attr("data-gid"))}),n.length&&$.ajax({url:o,dataType:"jsonp",jsonp:"jsonpcallback",data:{gids:n.join(",")},timeout:1e4,error:function(){},success:function(t){if(t&&1===t.code){var e;i.each(function(){if(e=$(this).attr("data-gid"),t.data[e]){var i=parseFloat(t.data[e].price),o=parseFloat(t.data[e].market_price);i===o&&o>0?($(this).find(a.originalPrice).hide(),$(this).find(a.currentPrice).find(".num").text(i),$(this).removeClass("hide")):o>i&&($(this).find(a.originalPrice).find(".num").text(o),$(this).find(a.currentPrice).find(".num").text(i),$(this).removeClass("hide"))}})}}})}}]);