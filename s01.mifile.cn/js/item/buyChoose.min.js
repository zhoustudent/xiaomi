!function(e){function t(a){if(i[a])return i[a].exports;var o=i[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){function a(e,t){if(e&&t){var i=e.lastIndexOf("."),a=e.slice(i),o=e.slice(0,i),s=o+"!"+t+"x"+t+a;return s}}function o(e){var t={elm:".J_bubbleTipTrigger",conWidth:400,conHtml:"",zindex:999},i=$.extend(t,e),a=$(i.elm);if(a.length){i.conHtml||(i.conHtml=a.attr("data-content"));var o=a.outerWidth(),s=a.outerHeight(),n=a.offset().top,r=a.offset().left;a.on("click",function(e){e.stopPropagation();var t=$("<div />");t.attr({"class":"bubble-tip-content J_bubbleTipContent"}).css({width:i.conWidth+"px",position:"absolute",top:n+s+10+"px",left:r-i.conWidth/2+o/2,"z-index":i.zindex}).html("<p>"+i.conHtml+"</p>"),$("body").append(t)}),$(document).on("click.hideBubbleTip",function(e){var t=$(".J_bubbleTipContent");t.is(e.target)||0!==t.has(e.target).length||t.remove()})}}i(2),MI.namespace("buyChoose"),MI.namespace("openSaleRegister"),MI.openSaleRegister={options:{setUrl:MI.GLOBAL_CONFIG.orderSite+"/misc/onsaleRegister",checkUrl:MI.GLOBAL_CONFIG.orderSite+"/misc/onsaleCheck",isLogin:$.cookie("userId")&&$.cookie("xm_order_btauth")?!0:!1,loginUrl:MI.GLOBAL_CONFIG.orderSite+"/site/login?ac=1&redirectUrl="+location.href},check:function(e,t){var i=this;if(e)return i.options.isLogin?void $.ajax({url:i.options.checkUrl,dataType:"jsonp",jsonp:"jsonpcallback",data:{goods_list:e},timeout:1e4,error:function(){"function"==typeof t&&t(!1)},success:function(a){if(a&&1===a.code){var o=a.data[e]?!0:!1;"function"==typeof t&&t(o)}else-2===a.code&&(location.href=i.options.loginUrl)}}):(location.href=i.options.loginUrl,!1)},register:function(e){var t=this,i=multiline(function(){/*!@tpl
	        <div class="modal modal-opensale-register hdie fade" id="J_modalOpenSaleRegister">
	            <span class="close iconfont"  data-dismiss="modal">&#xe602;</span>
	            <div class="modal-body">
	                <h4>开售提醒设置成功!</h4>

	                <p>
	                    请下载小米商城App ，开启通知功能<br>
	                    产品开售前，我们会通知您。
	                </p>
	                <img src="http://i3.mifile.cn/f/i/2014/cn/appdownload/apdownload-phone-code.png" alt="">
	                <span class="btn btn-primary" data-dismiss="modal">我知道了</span>
	            </div>
	        </div>
	      */
console.log()});return e?t.options.isLogin?void $.ajax({url:t.options.setUrl,dataType:"jsonp",jsonp:"jsonpcallback",data:{goods_id:e},timeout:1e4,error:function(){MI.alert({msg:"网络超时，请重试!"})},success:function(e){e&&1===e.code?($("#J_modalOpenSaleRegister").remove(),$("body").append(i),$("#J_modalOpenSaleRegister").modal("show")):-2===e.code&&(location.href=t.options.loginUrl)}}):(location.href=t.options.loginUrl,!1):void 0}},MI.buyChoose=function(){var e={packageData:null,stockData:null,lastStepNum:0,packageResult:{},insuranceResult:{},stepActiveClass:"active",stepLockClass:"lock",stepDisableClass:"disable",proFullName:"",hdInfoModeType:"",allGoods:[],hdinfoData:{}},t=function(){return alert("参数错误!"),location.href=MI.GLOBAL_CONFIG.itemSite+"/buyphone/",!1},i=function(){window.chooseConfig&&window.chooseConfig.phone_type?($("#J_navBar").find(".J_item[data-pro="+window.chooseConfig.phone_type+"]").addClass("current").siblings().removeClass("current"),o()):t()},o=function(){return window.chooseConfig&&window.chooseConfig.version_data?void s(window.chooseConfig.version_data):t()},s=function(i){function a(t){$.each(t,function(i,o){!o.goods_id&&o.children&&o.children.length?(s.push(o.node_id),a(o.children)):o.goods_id&&(e.allGoods.push({gid:o.goods_id.toString(),path:s.join("_")+"_"+o.node_id}),i===t.length-1&&(s=[]))})}if(!i)return t();if(i.href_url&&$("#J_proMore").removeClass("hide").attr("href",i.href_url),$("#J_proImg").attr({src:i.img,alt:i.title}),$(".J_proDesc, #J_headerBarDesc").html(i.desc),i.price_min&&i.price_max){var o=i.price_min+"元";i.price_min<i.price_max&&(o+="起"),$(".J_proPrice").html(o)}e.proFullName=i.title,e.packageData=window.chooseConfig.package_data,c(i),h();var s=[];a(window.chooseConfig.version_data.children),n()},n=function(){$.ajax({url:window.orderapi+"/stock/goods?gids="+window.chooseConfig.opensell_ids.join(","),dataType:"jsonp",jsonp:"jsonpcallback",timeout:3e4,error:function(){},success:function(t){e.stockData=t.data;var i=!1;$.each(e.allGoods,function(e,t){return f(t.gid)?(i=!0,!1):void 0}),i?r():l()}})},r=function(){var t=MI.GLOBAL_CONFIG.damiaoSite+"hdinfo/cn",i=w();return i?void $.ajax({url:t,dataType:"jsonp",jsonp:"callback",jsonpCallback:"hdinfo",data:{storage:"000",m:1},timeout:3e4,error:function(){MI.alert({msg:"抱歉！网络错误，请刷新重试！"})},success:function(t){e.hdinfoData=t.status,l()}}):(window.location.href=MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href,!1)},l=function(){function t(){$.each(e.allGoods,function(e,t){return t.gid===a?(o=t.path.split("_"),!1):void 0})}function i(e){var t=$('.J_stepItem[data-node-id="'+e+'"]');t&&t.trigger("click"),o.length&&setTimeout(function(){i(o.shift())},100)}var a,o=[];$.each(e.allGoods,function(t,i){if(f(i.gid)){if(e.hdinfoData[i.gid]&&e.hdinfoData[i.gid].hdstart&&!e.hdinfoData[i.gid].hdstop)return a=i.gid,!1}else if(e.stockData[i.gid]&&e.stockData[i.gid].stock)return a=i.gid,!1}),a||(a=e.allGoods[0].gid),t(a),i(o.shift())},c=function(t,i){var a=i?i:0;a+=1,a>1&&(t.lock=!0),t.stepIndex=a;var o=$(".J_step[data-index="+a+"]"),s=1,n=doT.template($("#J_chooseStepTemplate").html());if(o&&o.length>0){if(!t.children)return void o.empty();o.html(n(t)),s=o.find(".J_stepItem[data-index="+a+"]").eq(0).attr("data-node-id"),s=parseInt(s),e.lastStepNum=a,d(t,s,a)}else if(t.children){var r=$("<div>");r.addClass("pro-choose-step J_step"),r.attr("data-index",a),r.html(n(t)),$("#J_proStep").append(r),s=$(".J_stepItem[data-index="+a+"]").eq(0).attr("data-node-id"),s=parseInt(s,10),d(t,s,a)}},d=function(e,t,i){e&&t&&$.each(e.children,function(e,a){return a.node_id===t?(c(a,i),!1):void(a.children&&d(a,t,i))})},h=function(){$(".J_step").off().on("click",".J_stepItem",function(){var t=$(this).hasClass(e.stepLockClass),i=$(this).hasClass(e.stepDisableClass);if(!i&&!t){var a=parseInt($(this).attr("data-node-id")),o=parseInt($(this).attr("data-index")),s=$(this).attr("data-href");$(this).addClass(e.stepActiveClass).siblings().removeClass(e.stepActiveClass);var n=$(this).attr("data-desc")?$(this).attr("data-desc"):"";if($(".J_verDesc[data-index="+o+"]").html(n),s)return $("#J_chooseResultInit").find(".btn").attr("href",s).addClass("btn-primary").removeClass("btn-dakeLight"),void L();$("#J_chooseResultInit").find(".btn").attr("href","javascript:void(0);").addClass("btn-dakeLight").removeClass("btn-primary");var r=$(this).attr("data-title-price");r&&$(".J_proPrice").html(r),p(o),d(window.chooseConfig.version_data,a,o);var l=o+1,c=$(".J_step[data-index="+l+"]").find(".J_stepItem");c.removeClass(e.stepLockClass),J();var h=$(this).attr("data-gid");h?u($(this)):(T(),x());var f="";L(f)}})},p=function(e){var t=parseInt(e),i=0;$(".J_step").each(function(){i=parseInt($(this).attr("data-index")),i>t&&$(this).empty()})},u=function(t){if(t&&!(t.length<=0)){var i=t.attr("data-img"),a=t.attr("data-gid"),o=t.attr("data-presales"),s=t.attr("data-presales-status"),n=t.attr("data-presales-url"),r=t.attr("data-openbuy"),l=t.attr("data-openbuy-status"),c=t.attr("data-opensell"),d=t.attr("data-opensell-status"),h=t.attr("data-opensell-url"),p=t.attr("data-href"),u=t.attr("data-fixedlink-url"),m=t.attr("data-fixedlink-txt"),v={};if(v.gid=a,v.presales="1"===o?!0:!1,v.presalesStatus="1"===s?!0:!1,v.presalesUrl=n,v.openbuy="1"===r?!0:!1,v.openbuyStatus="1"===l?!0:!1,v.openSell="1"===c?!0:!1,v.openSellStatus="1"===d?!0:!0,v.openSellUrl=h,u&&m)try{v.fixedlink_url=u,v.fixedlink_txt=m,v.is_fixedlink=!0}catch(_){}v.hrefUrl=p,i&&$("#J_proImg").attr("src",i),e.chooseResult=v;var b=f(v.gid);if(b)return g(),T(),void x();if(v.openSell&&v.openSellStatus||v.presales&&v.presalesStatus||v.is_fixedlink){if(v.openSell&&v.openSellStatus&&e.stockData&&e.stockData[v.gid]){var k=e.stockData[v.gid];if(k&&!k.stock)return T(),x(),v.openSellStatus=!1,void J(v)}e.packageData.length>0?y():J(v)}else T(),x()}},f=function(e){if(!e)return!1;var t=window.chooseConfig.book_bigtap_ids,i=!1;return $.each(t,function(t){return t===e?(i=!0,!1):void 0}),i},m=function(t){var i="//tptm.hd.mi.com/gettimestamp";$.ajax({url:i,dataType:"script",timeout:5e3,error:function(){e.serverTime=(new Date).getTime()/1e3,t()},success:function(){e.serverTime=servertime&&"number"==typeof servertime?servertime:(new Date).getTime()/1e3,"function"==typeof t&&t()}})},g=function(){var t=window.chooseConfig.book_bigtap_ids[e.chooseResult.gid];v(t)},v=function(t){t&&($("#J_chooseResultInit").addClass("hide"),$("#J_chooseResult").html('<a  class="btn  btn-dakeLight" >正在加载...</a>').removeClass("hide"),m(function(){t.book_end_time>=e.serverTime&&t.is_book?_(0,t):t.buy_start_time>=e.serverTime?_(1,t):_(2,t)}))},_=function(t,i){var a=$("#J_chooseResult"),o=w();if(0===t)a.html('<a href="'+i.book_url+'" class="btn  btn-primary" >立即预约</a>');else if(1===t&&i)a.html('<a href="javascript:void(0);" class="btn  btn-gray btn-coutdown"  id="J_bigtapCoutdown">正在加载...</a>'),i.is_book&&i.book_check_url&&a.append('<a href="'+i.book_check_url+'" target="_blank">预约查询</a>'),o||a.append('<div class="choose-pre-login">您尚未登录，请提前 <a href="'+MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href+'">登录</a></div>'),k(i);else if(2===t&&i)C(i);else if(3===t)e.packageData.length>0?($("#J_chooseResult").html('<a  class="btn  btn-gray" >下一步</a>').removeClass("hide"),y()):J(e.chooseResult);else if(4===t)a.html('<a href="javascript:void(0);" class="btn  btn-gray">未预约</a>'),i&&a.append('<a href="'+i.book_check_url+'" target="_blank">预约查询</a>'),b({msg:"抱歉，您未预约本轮开放购买，暂无购买资格。"});else if(5===t||7===t){var s=function(){e.chooseResult.presales&&e.chooseResult.presalesStatus?a.find(".btn").after('<a href="'+e.chooseResult.presalesUrl+'" class="btn btn-primary">购买预售</a>'):e.chooseResult.presales&&!e.chooseResult.presalesStatus&&a.find(".btn").after('<span class="btn btn-gray">预售缺货</span>')};if(!window.chooseConfig.checkSaleReg)return void a.html('<a href="javascript:void(0);" class="btn  btn-gray" >暂时缺货</a>');MI.openSaleRegister.check(e.chooseResult.gid,function(t){a.html(t?'<a href="javascript:void(0);" class="btn  btn-gray" >暂时缺货</a><div class="open-sale-msg">您已设置开售提醒</div>':'<a data-gid="'+e.chooseResult.gid+'" href="javascript:void(0);" class="btn  btn-primary J_openSaleRegisterBtn">设置开售提醒</a>'),s()})}else 6===t&&a.html('<a href="javascript:void(0);" class="btn  btn-gray">活动即将开始...</a>')},b=function(e){if(e){var t=$("#J_modalBigtapTip"),i=t.find(".modal-body"),a=t.find(".modal-footer > .btn");i.html(e.msg),e.link?a.attr("href",e.link).html(e.linkText).removeAttr("data-dismiss"):a.removeAttr("href").html("看看其他商品").attr("data-dismiss","modal"),t.modal("show").on("hidden.bs.modal",function(){i.html("")})}},k=function(t){var i=$("#J_bigtapCoutdown");if(i.length&&t){var a,o,s=t.buy_start_time,n=parseInt((new Date).getTime()/1e3),r=0,l=!1,c=function(){r=e.serverTime-n,s-e.serverTime>=3600?_(7):p()},d=function(){i.html("正在加载..."),_(3)},h=function(){s-e.serverTime>=180&&180>=o&&!l&&(m(function(){r=e.serverTime-parseInt((new Date).getTime()/1e3)}),l=!0)},p=function(){if(a=parseInt((new Date).getTime()/1e3)+r,o=s-a,o>0){var e,t,n=Math.floor(o%60),l=Math.floor(o/60%60),c=Math.floor(o/3600%24),u=Math.floor(o/86400);u>0&&(c+=24*u),e=[n.toString(),l.toString(),c.toString(),u.toString()],t="距离开售：<i>"+e[2]+"</i>小时<i>"+e[1]+"</i>分<i>"+e[0]+"</i>秒",0===c&&(t="距离开售：<i>"+e[1]+"</i>分<i>"+e[0]+"</i>秒",0===l&&(t="距离开售：<i>"+e[0]+"</i>秒")),h(),i.html(t),window.countDownTimer&&clearTimeout(window.countDownTimer),window.countDownTimer=setTimeout(function(){p()},1e3)}else d()};c()}},w=function(){var e=$.cookie("userId"),t=$.cookie("xm_order_btauth");return e&&t?!0:!1},C=function(t){var i=MI.GLOBAL_CONFIG.damiaoSite+"hdinfo/cn",a=w();return a?(t.is_book||(i+="?product="+e.chooseResult.gid),T(),x(),void $.ajax({url:i,dataType:"jsonp",jsonp:"callback",jsonpCallback:"hdinfo",data:{storage:"000",m:1},timeout:1e4,error:function(){MI.alert({msg:"抱歉！网络错误，请刷新重试！"})},success:function(i){if(i&&i.status){var a=i.status[e.chooseResult.gid];if(e.hdInfoModeType=i.dbe5a2,!a)return void _(5);a.hdstart&&!a.hdstop&&a.reg?_(3):!a.hdstart||a.hdstop||a.reg?_(!a.hdstart&&a.hdstop?5:6):t.is_book?_(4,t):_(3)}else MI.alert({msg:"数据错误，请刷新重试！"})}})):(window.location.href=MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href,!1)},J=function(t){if(!t)return $("#J_chooseResultInit").removeClass("hide"),void $("#J_chooseResult").addClass("hide").empty();var i=doT.template($("#J_chooseResuleTemplate").html()),a="",o="",s=function(){a=i(t),$("#J_chooseResult").html(a).removeClass("hide"),$("#J_chooseResultInit").addClass("hide"),o=$("#J_proBuyBtn").attr("data-gid"),e.primaryGoodsId=o,I(o)};if(t.openSell&&!t.openSellStatus){if(!window.chooseConfig.checkSaleReg)return t.showSaleReg=!1,t.saleReg=!1,void s();MI.openSaleRegister.check(t.gid,function(e){e?t.saleReg=!0:(t.showSaleReg=!0,t.saleReg=!1),s()})}else s()},I=function(t,i){function a(){var t=MI.GLOBAL_CONFIG.cartSite+"/cart/recommend/goods_id/"+e.primaryGoodsId;e.packageResult&&e.packageResult.pid&&(t+="?package"),location.href=t}function o(t){if(t&&1===t.code)if(i)a();else if(e.packageResult.pid&&e.packageResult.list.length>0){var o=e.packageResult.pid+"-"+e.packageResult.list.join("|");I(o,!0)}else a();else 1!==t.code&&(MI.alert({msg:t.msg}),i&&a())}return t?void(i?MI.addShopCart(t,o):MI.bigtapAddCart({obj:"#J_proBuyBtn",modeType:e.hdInfoModeType,callback:o,overCallback:function(e){$(e).removeClass("btn-primary").addClass("btn-dakeLight").html("已售罄").removeAttr("id")}})):!1},y=function(t){var i=doT.template($("#J_packageTemplate").html()),a={},o=0;return a.stepIndex=e.lastStepNum+1,a.packageItem=[],a.lock=t?!0:!1,e.packageData.length<=0?!1:($.each(e.packageData,function(e,i){o=1*(parseFloat(i.market_price)-parseFloat(i.show_price)).toFixed(2),a.packageItem.push({title:i.commodity_name,packageId:i.commodity_id,save_price:o,show_price:i.show_price,lock:t?!0:!1})}),T(),x(),$("#J_proStep").append(i(a)),void $(".J_packageItem").on("click",function(){var t=$(this).attr("data-pid"),i=$(this).hasClass(e.stepActiveClass),a=$(this).hasClass(e.stepLockClass);i||a?($("#J_packageListBox").show(),$("#J_chooseMain").addClass("show-package")):($(this).addClass(e.stepActiveClass).siblings().removeClass(e.stepActiveClass),t?(R(t),e.packageResult.pid=t):x(),J(e.chooseResult),L())}))},R=function(t){if(t){var i=null;if($.each(e.packageData,function(e,a){return a.commodity_id===t?(i=a,!1):void 0}),i){var o=doT.template($("#J_packageListTemplate").html()),s={},n=1*(parseFloat(i.market_price)-parseFloat(i.show_price)).toFixed(2);s.title=i.commodity_name+"－<i>仅"+i.show_price+"元省"+n+"元</i>",s.list=[],$.each(i.list,function(e,t){s.list[e]={versions:[]},1===t.length&&(s.list[e].verHide=!0),$.each(t,function(t,i){0===t&&(s.list[e].goods_name=i.commodity_name,s.list[e].image=i.image),s.list[e].versions.push({image:a(i.image,140),icon:a(i.icon,14),gid:i.goods_id,title:i.commodity_name})})}),x(),$("#J_proStep").after(o(s)).addClass("show-package"),S()}}},S=function(){$(".J_packageListVersions").find(".J_item").on("click",function(){var e=$(this).attr("data-img"),t=$(this).attr("data-title");$(this).addClass("selected").siblings().removeClass("selected"),$(this).parent().siblings(".J_itemImg").find("img").attr({src:e}),$(this).parent().siblings(".J_itemTitle").html(t),D()}),$(".J_packageListVersions").each(function(){$(this).find(".J_item").eq(0).trigger("click")}),D()},x=function(t){t?$("#J_packageListBox").hide():($("#J_packageListBox").remove(),e.packageResult={}),$("#J_chooseMain").removeClass("show-package")},T=function(){$("#J_choosePackage").remove()},D=function(){e.packageResult.list=[],$(".J_packageListVersions").find(".J_item").each(function(){var t=$(this).hasClass("selected");if(t){var i=$(this).attr("data-gid");e.packageResult.list.push(i)}})},L=function(t){var i=e.proFullName;$(".J_stepItem").each(function(){$(this).hasClass("active")&&(i+=" "+$(this).attr("title"))}),t&&(i+=t);var a=$("#J_chooseResultMsg .msg-bd");a.html(i).parent().removeClass("hide"),$("#J_headerBarDesc").html(i),$(".J_packageItem").each(function(){return $(this).hasClass("active")&&$(this).attr("data-pid")?(i+="<br>"+$(this).attr("title"),a.html(i),!1):void 0})},M=function(e){var t=e+"&v="+parseInt((new Date).getTime()/1e5),i=MI.GLOBAL_CONFIG.itemSite+"/buyphone/getBuyphoneRecommend?phone_type="+t,a=$("#J_recommendGoods");$.ajax({url:i,method:"get",dataType:"json",error:function(){a.hide()},success:function(e){if(1===e.code){a.show();var t=doT.template($("#J_multiDescRecommend").html());a.find(".container").html(t(e.data))}else a.hide()}})},j={init:function(){var e=$(".pro-detail-box");$.each(window.chooseConfig.multi_desc,function(t,i){var a;"video"===i.type?(a=doT.template($("#J_multiDescVideo").html()),e.append(a(i.data))):"image"===i.type&&i.data.length?(a=doT.template(1===i.data.length?$("#J_multiDescImage").html():$("#J_multiDescSlider").html()),e.append(a(i.data))):"specs"===i.type&&(a=doT.template($("#J_multiDescSpecs").html()),e.append(a(i.data)))}),this.initialize()},initialize:function(){var e=this;e.slideshow($(".J_slide"),null),e.headerBar(),e.winResize(),this.bindEvt()},bindEvt:function(){var e=this;$(".J_showVideo").on("click",function(){var t=$(this).attr("data-video-url");return t&&e.showVideo(t),!1}),$("#J_showSpec").on("click",function(){$(this).toggleClass("spec-open"),$("#J_specCon").toggleClass("hide")}),$(window).on("resize",function(){e.winResize()}),window.chooseConfig.showRecomment||$("#J_recommendGoods").addClass("hide");var t=$("#J_proDetailBox").find(".section");t.visibleWatcher({offset:200,onVisible:function(e,i){t.filter(function(e){return i+1>e}).find(".lazyload").each(function(){var e=$(this).attr("data-bg"),t=$(this).attr("data-img");e?$(this).css("background-image","url("+e+")"):t&&$(this).attr("src",t)}),$(e).hasClass("section-recommend")&&window.chooseConfig.showRecomment&&(M(window.chooseConfig.phone_type),window.chooseConfig.showRecomment=!1)}})},showVideo:function(e){var t='<iframe height="348" width="530" src="{{URL}}" frameborder="0" allowfullscreen=""></iframe>';e&&$("#J_showVideo").on("hidden.bs.modal",function(){$(this).find(".modal-body").html("")}).on("show.bs.modal",function(){$(this).find(".modal-body").html(t.replace("{{URL}}",e))}).modal("show")},slideshow:function(e,t){function i(e){a.eq(e).fadeIn(n.duration).siblings().fadeOut(n.duration),n.pager&&o.children(".page").eq(e).addClass("active").siblings().removeClass("active")}var a,o,s,n,r,l=$(e),c="",d='<a class="slide-previous">上一页</a><a class="slide-next">下一页</a>',h=0;return 0===l.length?l:l.length>1?(l.each(function(){j.slideshow($(this),t)}),l):(s={itemSelector:".slide",control:!0,pager:!0,auto:!1,delay:5e3,duration:300},n=$.extend({},s,t),a=l.find(n.itemSelector),a.length<=1?e:(a.wrapAll('<div class="slides-wrapper"></div>'),n.pager&&(c='<div class="pagination">',a.each(function(e){c+='<a class="page" href="javascript: void(0);">'+e+"</a>"}),c+="</div>",o=$(c),l.append(o),o.children(".page").on("click",function(e){e.preventDefault(),h=$(this).index(),i(h)})),n.control&&(l.append($(d)),l.find(".slide-previous").on("click",function(e){e.preventDefault(),h-=1,0>h&&(h=a.length-1),i(h)}),l.find(".slide-next").on("click",function(e){e.preventDefault(),h+=1,h>a.length-1&&(h=0),i(h)})),n.auto&&(r=setInterval(function(){h+=1,h>a.length-1&&(h=0),i(h)},n.delay)),void i(h)))},headerBar:function(){var e=$("#J_proDetailBox").offset().top,t=$("#J_headerBar"),i="header-bar-active";$(window).on("scroll",function(){$(this).scrollTop()>=e?t.addClass(i):t.removeClass(i)}),t.find(".btn").on("click",function(){$("html, body").animate({scrollTop:150},500)})},winResize:function(){var e=$(window).width(),t=$(".J_resizeItem"),i=1260;t.each(function(){var t=$(this).attr("data-src-orig"),a=$(this).attr("data-src-s");i>=e?a&&$(this).attr("src",a):t&&$(this).attr("src",t)})}},G=function(){var e=$(window).height(),t=680;t>=e&&$("#J_proImg").height("80%")},B=function(){i(),j.init(),G(),$("#J_chooseResult").on("click",".J_openSaleRegisterBtn",function(){var e=$(this).attr("data-gid");return MI.openSaleRegister.register(e),!1})};return{init:B}}(),$(document).ready(function(){MI.buyChoose.init(),o({conWidth:500})})},function(e,t){!function(e){function t(t){function i(){for(var t=-1,i=e(document).scrollTop(),a=0,o=c.length;o>a&&i+n.viewport.height()>c[a];a+=1)t+=1;return t}function a(){var t=i();l!==t&&(l=t,r.filter(function(t){return l>=t&&!e(this).hasClass(n.visibleClass)}).addClass(n.visibleClass).trigger("visible.visibleWatcher"),n.onVisible(r.eq(l),l))}function o(){r.each(function(){var t=e(this).attr("data-offset")?Number(e(this).attr("data-offset")):n.offset,i=t%1===0?t:t*n.viewport.height();c.push(e(this).offset().top+i)}),a(),n.onLoad()}var s,n,r=e(this),l=-1,c=[];s={viewport:e(window),visibleClass:"is-visible",offset:300,onLoad:e.noop,onVisible:e.noop},n=e.extend({},s,t),o(),n.viewport.on({"scroll.visibleWatcher":a,"resize.visibleWatcher":o})}e.fn.visibleWatcher=function(e){return t.call(this,e),this}}(jQuery)}]);